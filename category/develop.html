<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>☆挑灯乄观星☆ - develop</title>

    <link rel="stylesheet" href="/theme/css/normalize.css" />
    <link rel="stylesheet" href="/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" />	
    <script src="/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="">☆挑灯乄观星☆</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
        
        

            <article>
                <a href="/open-edx-jian-dan-ke-cheng-jian-suo-api.html"><h3 class="article-title">Open edX 简单课程检索API</h3></a>
<h6 class="subheader" title="2015-03-12T00:00:00+08:00">2015-03-12 00:00:00
</h6>


<h4>添加courses/search/的api</h4>
<p><strong>lms/urls.py 添加地址配置</strong></p>
<div class="highlight"><pre>url(r&#39;^courses/search/$&#39;, &#39;branding.views.search_courses&#39;, name=&quot;search_courses&quot;)
</pre></div>


<p><strong>lms/djangoapps/branding/views.py 添加函数</strong></p>
<div class="highlight"><pre>def search_courses(request):
    return courseware.views.search_courses(request)
</pre></div>


<p><strong>lms/djangoapps/courseware/views.py 添加函数</strong></p>
<div class="highlight"><pre>def search_courses(request):
    &quot;&quot;&quot;
    Search specified courses, and return them in json format.
    &quot;&quot;&quot;
    courses = get_courses(request.user, request.META.get(&#39;HTTP_HOST&#39;))
    courses = sort_by_announcement(courses)

    offset = request.GET.get(&#39;offset&#39;)
    if offset and offset.isdigit():
        offset = long(offset)
    else:
        offset = 0

    limit = request.GET.get(&#39;limit&#39;)
    if limit and limit.isdigit():
        limit = long(limit) + offset

    if offset or limit:
        courses = courses[offset:limit]

    courses_json = [
        {
            &#39;about_course&#39;: reverse(&#39;about_course&#39;, args=[course.id.to_deprecated_string()]),
            &#39;display_number_with_default&#39;: course.display_number_with_default,
            &#39;is_newish&#39;: course.is_newish,
            &#39;short_description&#39;: get_course_about_section(course, &#39;short_description&#39;),
            &#39;course_image_url&#39;: course_image_url(course),
            &#39;start_date_is_still_default&#39;: course.start_date_is_still_default,
            &#39;start_datetime_text&#39;: course.start_datetime_text(),
            &#39;title&#39;: get_course_about_section(course, &#39;title&#39;),
            &#39;university&#39;: get_course_about_section(course, &#39;university&#39;),
        } for course in courses
    ]
    return HttpResponse(cgi.escape(json.dumps(courses_json)))
</pre></div><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/edx.html">edx </a>
</p>



            </article>


                <hr  class="gradient"/>


        


            <article>
                <a href="/edx-platformzhong-ge-ge-she-zhi-wen-jian-de-guan-xi.html"><h3 class="article-title">edx-platform中各个设置文件的关系</h3></a>
<h6 class="subheader" title="2015-03-11T00:00:00+08:00">2015-03-11 00:00:00
</h6>


<p>edx-platform的devstack下面有诸多的设置文件，刚接触edx开发难免会被这些文件搞昏头。
下面简略整理了下它们之间的联系。</p>
<p>edx-platform在lms和cms下各有一套设定，位于下面两个目录：</p>
<div class="highlight"><pre>edx-platform/lms/envs
edx-platform/cms/envs
</pre></div>


<h1>devstack.py</h1>
<p>lms中引用关系</p>
<div class="highlight"><pre>edx-platform/lms/envs/common.py
↓↓

edx-platform/lms/envs/aws.py
↓↓

edx-platform/lms/envs/devstack.py
</pre></div>


<p>cms中引用关系</p>
<div class="highlight"><pre>edx-platform/lms/envs/common.py
↓↓

edx-platform/cms/envs/common.py
↓↓

edx-platform/cms/envs/aws.py
↓↓

edx-platform/cms/envs/devstack.py ...</pre></div><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/edx.html">edx </a>
</p>



                <a class="button radius secondary small right" href="/edx-platformzhong-ge-ge-she-zhi-wen-jian-de-guan-xi.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="/pythonxu-ni-huan-jing-virtualenv.html"><h3 class="article-title">python虚拟环境virtualenv</h3></a>
<h6 class="subheader" title="2015-03-10T00:00:00+08:00">2015-03-10 00:00:00
</h6>


<h2>virtualenv</h2>
<p>用于创建独立的Python环境，多个Python相互独立，互不影响，它能够： </p>
<ol>
<li>
<p><strong>在没有权限的情况下安装新套件</strong></p>
</li>
<li>
<p><strong>不同应用可以使用不同的套件版本</strong></p>
</li>
<li>
<p><strong>套件升级不影响其他应用</strong></p>
</li>
</ol>
<h3>安装</h3>
<div class="highlight"><pre>sudo apt-get install python-virtualenv
</pre></div>


<h3>使用方法</h3>
<div class="highlight"><pre>virtualenv [虚拟环境名称]
</pre></div>


<p>如，创建<code>ENV</code>的虚拟环境</p>
<div class="highlight"><pre>virtualenv ENV
</pre></div>


<p>默认情况下，虚拟环境会依赖系统环境中的site packages，就是说系统中已经安装好的第三方package也会安装在虚拟环境中，如果不想依赖这些package，那么可以加上参数 --no-site-packages建立虚拟环境</p>
<div class="highlight"><pre>virtualenv --no-site-packages [虚拟环境名称]
</pre></div>


<h3>启动虚拟环境</h3>
<div class="highlight"><pre>cd ENV
source ./bin/activate
</pre></div>


<p>注意此时命令行会多一个(ENV)，ENV为虚拟环境名称，接下来所有模块都只会安装到该目录中去。</p>
<h3>退出虚拟环境</h3>
<div class="highlight"><pre>deactivate
</pre></div>


<h3>在虚拟环境安装Python套件</h3>
<p>Virtualenv 附带有pip安装工具，因此需要安装的套件可以直接运行：</p>
<div class="highlight"><pre>pip install ...</pre></div><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/python.html">python </a>
</p>



                <a class="button radius secondary small right" href="/pythonxu-ni-huan-jing-virtualenv.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="/ec2shang-smartereduhou-tai-an-zhuang-zhi-sheng-ji-python26dao-python27.html"><h3 class="article-title">ec2上SmarterEdu后台安装 之 升级python2.6到python2.7</h3></a>
<h6 class="subheader" title="2015-03-04T00:00:00+08:00">2015-03-04 00:00:00
</h6>


<p>在aws的ec2上安装SmarterEdu后台时，由于ec2上python是版本2.6等原因，需要先升级ec2环境。(SmarterEdu后台使用的是python2.7+django1.6)</p>
<p>本操作也适用于想把python2.6升级到python2.7的朋友。</p>
<h2>SmarterEdu_EC2_Update</h2>
<p>setuptools FTP:</p>
<div class="highlight"><pre>https://pypi.python.org/packages/source/s/setuptools/
</pre></div>


<p>mod_wsgi地址：</p>
<div class="highlight"><pre>https://modwsgi.googlecode.com/files/mod_wsgi-3.3.tar.gz
</pre></div>


<h2>以下为升级python并安装辅助工具包</h2>
<h4>参考：http://www.haogongju.net/art/2639594</h4>
<h3>1) 安装zlib</h3>
<div class="highlight"><pre>yum install zlib
yum install zlib-devel
</pre></div>


<p>＊zlib.h ...</p><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/aws.html">aws </a>
    <a href="/tag/linux.html">linux </a>
    <a href="/tag/python.html">python </a>
    <a href="/tag/smarteredu.html">smarteredu </a>
</p>



                <a class="button radius secondary small right" href="/ec2shang-smartereduhou-tai-an-zhuang-zhi-sheng-ji-python26dao-python27.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="/open-edx-ji-yu-oauth20de-apishi-yong.html"><h3 class="article-title">Open edX 基于oauth2.0的API使用</h3></a>
<h6 class="subheader" title="2015-03-04T00:00:00+08:00">2015-03-04 00:00:00
</h6>


<h3>获取access_token</h3>
<p>地址：</p>
<div class="highlight"><pre>http://&lt;your edxsite&gt;/oauth2/access_token/
</pre></div>


<p>方法：<code>POST</code></p>
<p>参数：</p>
<div class="highlight"><pre>client_id=&lt;your client_id&gt;
client_secret=&lt;your client_secret&gt;
grant_type=password
username=&lt;your username&gt;
password=&lt;your password&gt;
</pre></div>


<p>返回：</p>
<div class="highlight"><pre>{&quot;access_token&quot;: &quot;1b159861c3b1c6f4554c2a71168273433ea154dd&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 2591999, &quot;scope&quot;: &quot;&quot;}
</pre></div>


<p>这里的<code>access_token</code>在下面HEADER中用</p>
<h3>获取用户信息／获取用户注册课程／等</h3>
<p><strong>所有的端口可参考：http://edx-platform-api.readthedocs.org/en/latest/endpoints.html</strong></p>
<p>地址：</p>
<p>获取用户信息</p>
<div class="highlight"><pre>http ...</pre></div><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/edx.html">edx </a>
</p>



                <a class="button radius secondary small right" href="/open-edx-ji-yu-oauth20de-apishi-yong.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="/open-edxzhong-an-zhuang-smarteredu.html"><h3 class="article-title">Open edX中安装SmarterEdu</h3></a>
<h6 class="subheader" title="2015-03-04T00:00:00+08:00">2015-03-04 00:00:00
</h6>


<p>以下过程给edX安装<a href="http://smarteredu.org/">SmarterEdu</a>。</p>
<h3>安装的位置是edX的cms</h3>
<p><strong>1）首先将你的SmarterEdu项目文件夹复制到/edx/app/edxapp/edx-platform/cms目录下，结构如下：</strong></p>
<div class="highlight"><pre>edx-platform/cms/ 
  + djangoapps/
  + envs/
  + lib/
  + smartERproject
      + edx_if/
      + smarteredu/
      + static/
      + templates/
      + manage.py
      + ......
  + static/
  + templates/
  + .coveragerc
  + ......
</pre></div>


<p><strong>2）在 /edx/app/edxapp/edx-platform/cms/envs/common.py 中设定 INSTALLED_APPS，以安装SmarterEdu的包：</strong></p>
<div class="highlight"><pre>INSTALLED_APPS = (
    # SmarterEdu
    &#39;smarteredu.course&#39;,
    &#39;smarteredu.appauth&#39;,
)
</pre></div>


<p><strong>3）在 /edx/app/edxapp ...</strong></p><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/edx.html">edx </a>
    <a href="/tag/smarteredu.html">smarteredu </a>
</p>



                <a class="button radius secondary small right" href="/open-edxzhong-an-zhuang-smarteredu.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="/open-edx-she-zhi-smtpfa-song-you-jian.html"><h3 class="article-title">Open edX 设置smtp发送邮件</h3></a>
<h6 class="subheader" title="2015-02-26T00:00:00+08:00">2015-02-26 00:00:00
</h6>


<h2>邮件激活功能具体设置方法：</h2>
<h4>1）配置发件服务器地址和端口</h4>
<div class="highlight"><pre>sudo vi /edx/app/edxapp/cms.env.json

sudo vi /edx/app/edxapp/lms.env.json
</pre></div>


<p>在以上2个文件里设置</p>
<div class="highlight"><pre>&quot;EMAIL_HOST&quot;: &quot;mail.bistu.edu.cn&quot;,
&quot;EMAIL_PORT&quot;: 25,
&quot;EMAIL_USE_TLS&quot;: true,
&quot;SITE_NAME&quot;: &quot;这里设置你的域名，将会影响到激活地址的域名&quot;,
</pre></div>


<h4>2）配置发件账号和密码</h4>
<div class="highlight"><pre>sudo vi /edx/app/edxapp/cms.auth.json

sudo vi /edx/app/edxapp/lms.auth.json ...</pre></div><p class="subheader">Category: <a href="/category/develop.html">develop</a>

    Tagged: 
    <a href="/tag/edx.html">edx </a>
</p>



                <a class="button radius secondary small right" href="/open-edx-she-zhi-smtpfa-song-you-jian.html">Read More</a>
                <hr  class="gradient"/>
            </article>

            <!-- /#posts-list -->
<div class="pagination-centered">
<h6 class="subheader">Page 1 of 1</h6>

<p>

</p>
</div>

    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="/archives.html">Archives</a>
            <li><a href="/tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="/category/art.html">art</a></li>
            <li><a href="/category/develop.html">develop</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://getpelican.com/">Pelican</a></li>
            <li><a href="http://python.org/">Python.org</a></li>
            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="http://smarteredu.org/">SmarterEdu</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>☆挑灯乄观星☆ by cn</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>